## Level 4: Walk Through a Simple Example

| Level 0 | Level 1 |   Level 2    | Level 3 |   Level 4   |  Level 5  | Level 6 | Start |
| :-----: | :-----: | :----------: | :-----: | :---------: | :-------: | :-----: | :---: |
|   ‚úÖ    |   ‚úÖ    |      ‚úÖ      |   ‚úÖ    | üìç **YOU**  |    ‚è∏Ô∏è     |   ‚è∏Ô∏è    |  ‚è∏Ô∏è   |
| Problem | Mindset | How It Works | Visual  | **Example** | Deep Dive | Topics  | Setup |

**‚è±Ô∏è Time: 15-30 minutes**

> üì∑ **[Visual Placeholder]**: Simple flowchart showing one test cycle: Red (failing test) ‚Üí Review ‚Üí Green (passing code) ‚Üí Review ‚Üí Refactor ‚Üí Review
>
> _Alt text: "One complete TDD cycle"_

> ‚ö†Ô∏è **Note**: This is a walkthrough, not a hands-on exercise yet. You'll set up your environment in the "Ready to Start" section. For now, just follow along to understand the flow.

Let's walk through a trivial example to see AAID in action. We'll build a simple todo feature.

### The Specification

```gherkin
User Story:
As a user, I want to add a new todo to my list

Scenario: Add a new todo
  Given the user has an empty todo list
  When they add a todo "Buy groceries"
  Then "Buy groceries" should be in their active todos
  And the todo should not be completed
```

### Stage 1 & 2: Context and Planning (Condensed)

In a real project, you'd provide comprehensive context. For this example:

- Context: Simple todo app, TypeScript, class-based services
- Planning: Test that new todos are created with `completed: false`

### Stage 3: TDD Starts

Create the test structure:

```typescript
describe("TodoService", () => {
  it.skip("should add a todo with completed set to false")
})
```

### Stage 4: The TDD Cycle - First Test

#### üî¥ RED Phase

**Write the failing test:**

```typescript
import { TodoService } from "./todo.service"

describe("TodoService", () => {
  it("should add a todo with completed set to false", () => {
    // Given
    const mockRepository = {}
    const service = new TodoService(mockRepository)

    // When
    const result = service.addTodo("Buy groceries")

    // Then
    expect(result.completed).toBe(false)
  })
})
```

**Run test**: ‚ùå Fails (files don't exist)

**‚è∏Ô∏è REVIEW CHECKPOINT**

- Does the test describe behavior (not implementation)?
- Is the test API nice to use?
- Clear Given/When/Then structure?

**‚úÖ Approved** ‚Üí Proceed to GREEN

#### üü¢ GREEN Phase

**Write simplest code to pass:**

```typescript
// todo.service.ts
export class TodoService {
  constructor(private repository: unknown) {}

  addTodo(text: string) {
    return { text: "", completed: false } // Hardcoded!
  }
}
```

**Run test**: ‚úÖ Passes

**‚è∏Ô∏è REVIEW CHECKPOINT**

- Is this the simplest code to pass?
- All tests still passing?

**‚úÖ Approved** ‚Üí Proceed to REFACTOR

#### üßº REFACTOR Phase

**Evaluate for improvements:**

With only one test, maybe extract a model class:

```typescript
// todo.model.ts
export class TodoModel {
  constructor(
    public readonly text: string = "",
    public readonly completed: boolean = false
  ) {}

  static create(): TodoModel {
    return new TodoModel("", false)
  }
}

// todo.service.ts
import { TodoModel } from "./todo.model"

export class TodoService {
  constructor(private repository: unknown) {}

  addTodo(text: string) {
    return TodoModel.create()
  }
}
```

**Run tests**: ‚úÖ Still passing

**‚è∏Ô∏è FINAL REVIEW CHECKPOINT**

- Code quality improved?
- No regressions?

**‚úÖ Approved** ‚Üí Next test

### Continuing the Cycle

**Second test** might verify: `'should create todo with provided text'`

- Forces: Use the `text` parameter properly

**Third test** might verify: `'should persist new todos'`

- Forces: Define repository interface, call `repository.save()`

**Fourth test** might verify: `'should return todo with generated ID'`

- Forces: Repository must return ID after save

Each test gradually shapes the implementation. No test = no code.

---

**üõë Checkpoint**: Did this example make sense?

- **Yes, I see how TDD + AI works** ‚Üí Continue to [Level 5](./5.md) for the real workflow
- **Want to try it yourself** ‚Üí Jump to ["Ready to Start for Real?"](./get-started.md) for setup instructions
- **Still confused** ‚Üí Try working through the example again, that's normal!

---

‚úÖ **Progress: 60% complete** | Next: Level 5 (30-60 minutes) - Deep Dive

---

‚¨ÖÔ∏è Back to the main onboarding guide: [AAID Workflow and Guide](../guide.md)
