## Level 4: See TDD Catch Real AI Mistakes

| Level 0 | Level 1 |   Level 2    | Level 3 |    Level 4    |    Level 5     | Start |
| :-----: | :-----: | :----------: | :-----: | :-----------: | :------------: | :---: |
|   ‚úÖ    |   ‚úÖ    |      ‚úÖ      |   ‚úÖ    |  üìç **YOU**   |       ‚è∏Ô∏è       |  ‚è∏Ô∏è   |
| Problem | Mindset | How It Works | Visual  | **TDD Value** | **Essentials** | Setup |

**‚è±Ô∏è Time: 10-15 minutes**

> üì∑ **[Visual Placeholder]**: Split-screen illustration. LEFT (red/orange chaos): AI robot enthusiastically generating excessive code with floating validation rules creating chaos, labeled "Without AAID." RIGHT (blue/green calm): Same AI robot working within structured TDD framework, generating clean minimal code with green checkmark, labeled "With AAID." Professional graphic style with clear contrast.

> ‚ö†Ô∏è **Note**: This walkthrough shows why TDD discipline matters when working with AI, and how AAID's rules enforce that discipline automatically.

Let's see a **real scenario** where the AI agent tries to be "helpful" but TDD saves you from shipping bugs and over-engineering.

### The Specification

```gherkin
User Story:
As a user, I want my password to be validated for basic security

Scenario: Password must be at least 8 characters
  Given I'm creating a new account
  When I enter a password with less than 8 characters
  Then I should see an error "Password must be at least 8 characters"
```

### The Risk: What Happens Without TDD Discipline

When AI generates code without TDD constraints, it tends to be "helpful" beyond the specification:

**Developer**: _"AI, implement password validation"_

**AI without constraints**: _"Here's a comprehensive solution:"_

```typescript
type ValidationResult = { isValid: boolean; errors: string[] }

class PasswordValidator {
  validate(password: string): ValidationResult {
    const errors = []

    // Length check (actually in specification)
    if (password.length < 8) {
      errors.push("Password must be at least 8 characters")
    }

    // AI adds these without being asked!
    if (!/[A-Z]/.test(password)) {
      errors.push("Password must contain an uppercase letter")
    }

    if (!/[0-9]/.test(password)) {
      errors.push("Password must contain a number")
    }

    if (!/[!@#$%^&*]/.test(password)) {
      errors.push("Password must contain a special character")
    }

    // Even more "helpful" additions
    if (password.length > 64) {
      errors.push("Password too long")
    }

    if (this.isCommonPassword(password)) {
      errors.push("Password is too common")
    }

    return { isValid: errors.length === 0, errors }
  }

  private isCommonPassword(password: string): boolean {
    const commonPasswords = ["password", "12345678" /* ... */]
    return commonPasswords.includes(password.toLowerCase())
  }
}
```

**The Problems**:

- ‚ùå Specification only asked for 8-character minimum
- ‚ùå AI added 5 extra validation rules
- ‚ùå Now your simple feature has untested edge cases
- ‚ùå Users complain their passwords are rejected
- ‚ùå You don't know which rules are actually required

**Why this is bad**: Sure, those look like "good" security features. But they're not in the spec (business never approved them), they have zero tests (might be buggy), and they're breaking real users whose passwords like `"simplepass"` were perfectly valid per the actual requirement. You've shipped untested, unapproved features that are actively harming UX.

### How AAID's Rules Enforce TDD Discipline

Now let's see the same scenario with AAID rules guiding the AI.

#### üî¥ RED Phase - Write Only What's Needed

**Test first (what we actually need):**

```typescript
describe("PasswordValidator", () => {
  it("should reject password shorter than 8 characters", () => {
    // Given
    const validator = new PasswordValidator()
    const shortPassword = "abc123"

    // When
    const result = validator.validate(shortPassword)

    // Then
    expect(result.isValid).toBe(false)
    expect(result.errors).toContain("Password must be at least 8 characters")
  })
})
```

**Run test**: ‚ùå Fails (PasswordValidator doesn't exist)

**‚è∏Ô∏è REVIEW CHECKPOINT**:

- Does test match specification exactly? ‚úì
- Any extra requirements? No ‚úì

#### üü¢ GREEN Phase - AAID Rules Keep AI Focused

The AAID rules file contains explicit instructions for GREEN phase:

> _"Write ABSOLUTE MINIMUM code to pass current test(s). NO untested edge cases, validation, or future features."_

**AI following AAID rules generates:**

```typescript
type ValidationResult = { isValid: boolean; errors: string[] }

class PasswordValidator {
  validate(password: string): ValidationResult {
    const errors = []

    if (password.length < 8) {
      errors.push("Password must be at least 8 characters")
    }

    return { isValid: errors.length === 0, errors }
  }
}
```

**Run test**: ‚úÖ Passes

Notice what's **NOT** there:

- ‚ùå No uppercase requirement
- ‚ùå No number requirement
- ‚ùå No special character requirement
- ‚ùå No common password check

The AI generated only what the test required, nothing more.

**‚è∏Ô∏è REVIEW CHECKPOINT**:

- ‚úì Code passes the test
- ‚úì No untested behavior
- ‚úì Matches specification exactly

**Your review confirms alignment**, then you proceed.

#### üßº REFACTOR Phase - Keeping It Clean

**Evaluation**: The code works, but we can improve its structure. As more validation rules come, we'll want a cleaner pattern.

**Your guidance**: _"Make it easy to extend. Extract validation rule to private method, no mutations, add an interface for it."_

**Refactored version:**

```typescript
type ValidationResult = { isValid: boolean; errors: string[] }
type ValidationRule = (password: string) => string | undefined

class PasswordValidator {
  public validate(password: string): ValidationResult {
    const errors = [this.validateLength(password)].filter(
      error => error !== undefined
    )

    return { isValid: errors.length === 0, errors }
  }

  private validateLength: ValidationRule = password => {
    return password.length < 8
      ? "Password must be at least 8 characters"
      : undefined
  }
}
```

**‚è∏Ô∏è REVIEW CHECKPOINT**:

- ‚úì All tests still pass
- ‚úì No new behavior added
- ‚úì Code quality improved
- ‚úì `"simplepass"` would now be accepted - it meets the actual requirement.

### The Result: Three Laws in Action

Notice the outcome: 50+ lines of "helpful" chaos became 10 lines of focused code. This is the AAID rules enforcing Robert C. Martin's Three Laws of TDD:

1. **Write no production code without a failing test** ‚Üí Prevented adding features without specifications
2. **Write only enough test code to fail** ‚Üí Kept test focused on one requirement
3. **Write only enough production code to pass** ‚Üí Stopped overengineering

Test defines the boundary. No test? No code.

### What About Review Checkpoints?

You might wonder: _"If AAID rules prevent overengineering, why do we need reviews?"_

**Reviews are verification gates, not constant correction sessions.**

Think of it like spell-check:

- **AAID rules** = Built-in grammar checker (catches most issues automatically)
- **Your reviews** = Final proofreading (ensures 100% quality)

> üí° **Reality Check**: Current AI models follow AAID instructions correctly 85-95% of the time (and improving as models advance). When deviations happen, your review catches them instantly before they ship. That's the safety net working as designed.

This same pattern (AI trying to be "too helpful" without test boundaries) shows up as premature optimization, extra validation, unwanted dependencies, and feature creep. AAID's TDD rules prevent all of these.

---

**üõë Checkpoint**: See how TDD discipline improves software quality, and guards against AI code slop?

- **"Yes, this makes sense!"** ‚Üí Continue to [Level 5](./5.md) for essential concepts
- **"I want to try this myself"** ‚Üí Jump to ["Ready to Start for Real?"](./get-started.md) for setup
- **"Show me the full workflow details"** ‚Üí Review [Level 3](./3.md) for the complete cycle

> üéØ **Key Insight**: You're not limiting AI's helpfulness, you're focusing it. AAID rules teach the AI TDD discipline, your reviews verify alignment, and together they ensure the AI moves fast in the RIGHT direction. That's the power of augmentation over autonomy.

---

‚úÖ **Progress: 60% complete** | Next: Level 5 (5-10 minutes) - Essential Concepts

---

‚¨ÖÔ∏è Back to [AAID Onboarding Guide](../guide.md)
